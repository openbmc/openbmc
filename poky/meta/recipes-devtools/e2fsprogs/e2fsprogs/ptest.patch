Upstream-Status: Inappropriate

Index: git/tests/Makefile.in
===================================================================
--- git.orig/tests/Makefile.in
+++ git/tests/Makefile.in
@@ -18,7 +18,7 @@ test_one: $(srcdir)/test_one.in Makefile
 	@echo "#!/bin/sh" > test_one
 	@echo "HTREE=y" >> test_one
 	@echo "QUOTA=y" >> test_one
-	@echo "SRCDIR=@srcdir@" >> test_one
+	@echo "SRCDIR=${prefix}${libdir}/e2fsprogs/ptest/test" >> test_one
 	@echo "DIFF_OPTS=@UNI_DIFF_OPTS@" >> test_one
 	@echo "SIZEOF_TIME_T=@SIZEOF_TIME_T@" >> test_one
 	@echo "DD=@DD@" >>test_one
@@ -28,7 +28,7 @@ test_one: $(srcdir)/test_one.in Makefile
 test_script: test_one test_script.in Makefile mke2fs.conf
 	@echo "Creating test_script..."
 	@echo "#!/bin/sh" > test_script
-	@echo "SRCDIR=@srcdir@" >> test_script
+	@echo "SRCDIR=${prefix}${libdir}/e2fsprogs/ptest/test" >> test_script
 	@cat $(srcdir)/test_script.in >> test_script
 	@chmod +x test_script
 
Index: git/tests/test_config
===================================================================
--- git.orig/tests/test_config
+++ git/tests/test_config
@@ -3,24 +3,24 @@
 #
 
 unset LANG LANGUAGE LC_ADDRESS LC_ALL LC_COLLATE LC_CTYPE LC_IDENTIFICATION LC_MEASUREMENT LC_MESSAGES LC_MONETARY LC_NAME LC_NUMERIC LC_PAPER LC_TELEPHONE LC_TIME PAGER
-FSCK="$USE_VALGRIND ../e2fsck/e2fsck"
-MKE2FS="$USE_VALGRIND ../misc/mke2fs"
-DUMPE2FS="$USE_VALGRIND ../misc/dumpe2fs"
-TUNE2FS="$USE_VALGRIND ../misc/tune2fs"
-CHATTR="$USE_VALGRIND../misc/chattr"
-LSATTR="$USE_VALGRIND ../misc/lsattr"
-E2IMAGE="$USE_VALGRIND ../misc/e2image"
-E2IMAGE_EXE="../misc/e2image"
-DEBUGFS="$USE_VALGRIND ../debugfs/debugfs"
-DEBUGFS_EXE="../debugfs/debugfs"
-TEST_BITS="../debugfs/debugfs"
-RESIZE2FS_EXE="../resize/resize2fs"
+FSCK="$USE_VALGRIND e2fsck"
+MKE2FS="$USE_VALGRIND mke2fs"
+DUMPE2FS="$USE_VALGRIND dumpe2fs"
+TUNE2FS="$USE_VALGRIND tune2fs"
+CHATTR="$USE_VALGRIND chattr"
+LSATTR="$USE_VALGRIND lsattr"
+E2IMAGE="$USE_VALGRIND e2image"
+E2IMAGE_EXE="/sbin/e2image"
+DEBUGFS="$USE_VALGRIND debugfs"
+DEBUGFS_EXE="/sbin/debugfs"
+TEST_BITS="/sbin/debugfs"
+RESIZE2FS_EXE="/sbin/resize2fs"
 RESIZE2FS="$USE_VALGRIND $RESIZE2FS_EXE"
-E2UNDO_EXE="../misc/e2undo"
+E2UNDO_EXE="/sbin/e2undo"
 E2UNDO="$USE_VALGRIND $E2UNDO_EXE"
-TEST_REL=../tests/progs/test_rel
-TEST_ICOUNT=../tests/progs/test_icount
-CRCSUM=../tests/progs/crcsum
+TEST_REL=./progs/test_rel
+TEST_ICOUNT=./progs/test_icount
+CRCSUM=./progs/crcsum
 CLEAN_OUTPUT="sed -f $cmd_dir/filter.sed"
 LD_LIBRARY_PATH=../lib:../lib/ext2fs:../lib/e2p:../lib/et:../lib/ss:${LD_LIBRARY_PATH}
 DYLD_LIBRARY_PATH=../lib:../lib/ext2fs:../lib/e2p:../lib/et:../lib/ss:${DYLD_LIBRARY_PATH}
Index: git/tests/test_script.in
===================================================================
--- git.orig/tests/test_script.in
+++ git/tests/test_script.in
@@ -39,7 +39,7 @@ for i; do
 done
 
 if test "$TESTS"x = x ; then
-    if test -n "DO_FAILED"; then
+    if test -n "$DO_FAILED"; then
 	exit 0
     fi
     TESTS=`ls -d $SRCDIR/[a-zA-Z]_*`
