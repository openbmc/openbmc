From 6bfd346da6639a83e17e271e95ce33d1d095334a Mon Sep 17 00:00:00 2001
From: Patrick Williams <patrick@stwcx.xyz>
Date: Fri, 21 Jul 2017 16:30:01 -0500
Subject: [PATCH] config/ast-common: hack bootopts

Signed-off-by: Patrick Williams <patrick@stwcx.xyz>
---
 include/configs/ast-common.h | 6 ++++++
 1 file changed, 6 insertions(+)

diff --git a/include/configs/ast-common.h b/include/configs/ast-common.h
index 110c780070..6f2a50b854 100644
--- a/include/configs/ast-common.h
+++ b/include/configs/ast-common.h
@@ -84,7 +84,10 @@
 #define CONFIG_SYS_MAXARGS		16
 #define CONFIG_SYS_BARGSIZE		CONFIG_SYS_CBSIZE
 
+#if 0
 #define CONFIG_BOOTARGS			"console=ttyS4,115200n8 root=/dev/ram rw"
+#endif
+#define CONFIG_BOOTARGS                         "console=ttyS4,115200n8 root=/dev/mtdblock4 ro"
 
 #define CONFIG_AST_SPI_NOR    /* AST SPI NOR Flash */
 #define CONFIG_FMC_CS			1
@@ -96,11 +99,14 @@
 #define CONFIG_ENV_OFFSET		0x60000	/* environment starts here  */
 #define CONFIG_ENV_SIZE			0x20000	/* Total Size of Environment Sector */
 
+#if 0
 #define CONFIG_BOOTCOMMAND	\
 	"fdt addr 20080000; " \
 	"if fdt get value ramdisk_conf /configurations/conf@1 ramdisk; then " \
 	"    bootm 20080000; else bootm 20080000 20300000; " \
 	"fi"
+#endif
+#define CONFIG_BOOTCOMMAND                      "fdt addr 20080000; bootm 20080000"
 #define CONFIG_ENV_OVERWRITE
 
 #define ASPEED_ENV_SETTINGS \
-- 
2.13.0

