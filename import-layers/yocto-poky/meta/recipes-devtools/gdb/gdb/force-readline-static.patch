If gdb is configured with --disable-static then this is dutifully passed to
readline which then disables libreadline.a, which causes a problem when gdb
tries to link against that.

To ensure that readline always builds static libraries, pass --enable-static to
the sub-configure.

Upstream-Status: Pending
Signed-off-by: Ross Burton <ross.burton@intel.com>

diff --git a/Makefile.def b/Makefile.def
index 4394188..05c661a 100644
--- a/Makefile.def
+++ b/Makefile.def
@@ -100,7 +100,8 @@ host_modules= { module= libiconv;
 		missing= install-html;
 		missing= install-info; };
 host_modules= { module= m4; };
-host_modules= { module= readline; };
+host_modules= { module= readline;
+                extra_configure_flags='--enable-static';};
 host_modules= { module= sid; };
 host_modules= { module= sim; };
 host_modules= { module= texinfo; no_install= true; };
diff --git a/Makefile.in b/Makefile.in
index 61e0ab6..837f36e 100644
--- a/Makefile.in
+++ b/Makefile.in
@@ -24971,7 +24971,7 @@ configure-readline:
 	  $$s/$$module_srcdir/configure \
 	  --srcdir=$${topdir}/$$module_srcdir \
 	  $(HOST_CONFIGARGS) --build=${build_alias} --host=${host_alias} \
-	  --target=${target_alias}  \
+	  --target=${target_alias} --enable-static \
 	  || exit 1
 @endif readline
 
